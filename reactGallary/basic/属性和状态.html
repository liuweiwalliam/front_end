<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>属性和状态的实例</title>
</head>
<body>
<div id="parent"></div>
<div id="child"></div>
<script src="../../node_modules/react/dist/react.js"></script>
<script src="../../node_modules/react-dom/dist/react-dom.js"></script>
<script src="../../node_modules/babel-standalone/babel.js"></script>
<script type="text/jsx">
    let Content = React.createClass({
        getInitialState: function () {
            return {'text': 'reply to' + this.props.name,}
        },
        subMessage: function (event) {
            let text = event.target.value;
            if(text == ""){
                this.setState({'text': 'reply to ' + this.props.name + ':'});
            }else{
                this.setState({'text': 'reply to ' + this.props.name + ':' + text});
            }
        },
        render: function () {
            console.log(this.state.text);
            return <div style={{'display': this.props.isShow}}>
                <span>{this.state.text}</span>
                <br/>
                <textarea name="" id="" cols="30" rows="10" placeholder="please enter some word"
                          onBlur={this.subMessage}></textarea>
            </div>
        },
    });
    let Comment = React.createClass({
        getInitialState: function () {
            let name = ['waliam', 'bob', 'liuis'];
            let css = {'color': 'red', 'fontSize': "20px"};
            return {'nameList': name, 'css': css, 'select': "", 'commentIsShow': 'none'}
        },
        handleSelect: function (event) {
            let index = event.target.selectedIndex;
            let select = event.target.options[index].text;
            this.setState({'select': select, 'commentIsShow': 'block'});
        },
        render: function () {
            function getOptionHTML(arr) {
                let str = [];
                arr.forEach(function (item, i) {
                    str.push(<option value={i} name={item}>{item}</option>);//
                });
                return str;
            };
            var optionHtml = getOptionHTML(this.state.nameList);
            return <div style={this.state.css}>
                <select name="" id="" onChange={this.handleSelect}>
                    {optionHtml}
                </select>
                <div style={{'marginTop': '100px'}}>
                    <Content name={this.state.select} isShow={this.state.commentIsShow}/>
                </div>
            </div>
        },
    });
    ReactDOM.render(
            <Comment/>,
            document.getElementById('parent')
    );
</script>
</body>
</html>